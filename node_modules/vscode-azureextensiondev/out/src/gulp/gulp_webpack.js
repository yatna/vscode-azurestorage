"use strict";
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/
Object.defineProperty(exports, "__esModule", { value: true });
const cp = require("child_process");
const path = require("path");
const process = require("process");
// tslint:disable-next-line: export-name
function gulp_webpack(mode) {
    const env = process.env;
    // without this, webpack can run out of memory in some environments
    env.NODE_OPTIONS = '--max-old-space-size=8192';
    return cp.spawn(path.join('.', 'node_modules', '.bin', 
    // https://github.com/nodejs/node-v0.x-archive/issues/2318#issuecomment-249355505
    process.platform === 'win32' ? 'webpack.cmd' : 'webpack'), [
        '--mode', mode,
        '--display', 'minimal'
    ], {
        stdio: 'inherit',
        env
    });
}
exports.gulp_webpack = gulp_webpack;
//# sourceMappingURL=gulp_webpack.js.map